# ssr-recipe

```
🤟 실습을 따라하면서 지운 부분도 있기 때문에 책에 있는 내용이 코드에 없을 수도 있습니다.
```

## 공부한 내용
### 20장 서버 사이드 렌더링
**서버 사이드 렌더링**이란 <u>UI를 서버에서 렌더링하는 것</u>을 의미한다.<br>
**클라이언트 사이드 렌더링**은 UI 렌더링을 브라우저에서 모두 처리한다. 즉, <u>자바스크립트를 실행해야</u> 만든 화면이 사용자에게 보여진다.

- 서버 사이드 렌더링 이해하기

    < 서버 사이드 렌더링의 장점 >
    - 검색 엔진이 웹 애플리케이션의 페이지를 원활하게 수집할 수 있다.

        리액트로 만든 SPA는 검색 엔진 크롤러 봇처럼 자바스크립트가 실행되지 않는 환경에서는 페이지가 제대로 나타나지 않는다. 따라서 웹 서비스의 검색 엔진 최적화를 위해서라면 서버 사이드 렌더링을 구현해 주는 것이 좋다.

    - 초기 렌더링 성능을 개선할 수 있다.

        만약 서버 사이드 렌더링이 구현되지 않은 웹 페이지에 사용자가 방문하면, 자바스크립트가 로딩되고 실행될 때까지 사용자는 비어 있는 페이지를 보며 대기 해야 한다. API까지 호출해야 한다면 대기 시간이 더욱 길어질 것이다.<br>
        서버 사이드 렌더링을 구현한 웹 페이지에서는 자바스크립트 파일 다운로드가 완료되지 않은 시점에서도 html상에 콘텐츠가 있으므로 사용자가 대기하는 시간이 줄어들게 된다.

    < 서버 사이드 렌더링의 단점 >
    - 원래 브라우저가 해야 할 일을 서버가 대신 처리하므로 서버 리소스가 사용된다.

        갑자기 수많은 사용자가 동시에 웹 페이지에 접속하면 서버에 과부하가 발생할 수 있다. 따라서 사용자가 많은 서비스라면 캐싱과 로드 밸런싱을 통해 성능을 최적화해 주어야 한다.

    - 프로젝트의 구조가 복잡해질 수 있다.

        데이터 미리 불러오기, 코드 스플리팅과의 호환 등 고려해야 할 사항이 더 많아져 복잡해질 수 있다.

- 서버 사이드 렌더링 구현하기

    서버 사이드 렌더링을 구현하려면 웹팩 설정을 커스터마이징해 주어야 한다. CRA로 만든 프로젝트에서는 웹팩 관련 설정이 기본적으로 모두 숨겨져 있으니 `yarn eject` 명령어를 실행하여 밖으로 꺼내야 한다.
    ```bash
    git add .
    git commit -m "Commit befoe eject"
    yarn eject
    ```

    라이브러리를 불러오면 빌드할 때 결과물 파일 안에 해당 라이브러리 관련 코드가 함께 번들링된다. 브라우저에서 사용할 때는 결과물 파일에 리액트 라이브러리와 애플리케이션에 관한 코드가 공존해야 한다. 서버에서는 node_modules를 통해 바로 불러와 사용할 수 있기 때문에 굳이 결과물 파일 안에 리액트 라이브러리가 들어 있지 않아도 된다.

    따라서 서버를 위해 번들링할 때는 node_modules에서 불러오는 것을 제외하고 번들링하는 것이 좋다. 이를 위해 `webpack-node-externals` 라이브러리를 사용한다.

    서버 사이드 렌더링을 처리할 서버는 Node.js의 웹 프레임워크인 Express를 사용 했다. 해당 프레임워크가 사용률이 가장 높고, 정적 파일들을 호스팅할 때도 쉽게 구현할 수 있기 때문이다.

